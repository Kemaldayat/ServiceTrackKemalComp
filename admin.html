<!-- admin.html -->
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - Update Antrian</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 2rem; text-align: center; }
    input, button, select { padding: 0.5rem; margin: 0.5rem; width: 90%; max-width: 400px; }
    form { background: white; padding: 1rem; border-radius: 8px; display: inline-block; }
    .success { color: green; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>Form Admin Antrian Service</h1>
  <form onsubmit="submitData(event)">
    <input type="text" id="kode" placeholder="Nomor Antrian (contoh: SVC001)" required /><br />
    <input type="text" id="nama" placeholder="Nama Pelanggan" required /><br />
    <input type="text" id="barang" placeholder="Jenis Barang" required /><br />
    <select id="status">
      <option value="Menunggu">Menunggu</option>
      <option value="Sedang Diperbaiki">Sedang Diperbaiki</option>
      <option value="Selesai">Selesai</option>
      <option value="Diambil">Diambil</option>
    </select><br />
    <button type="submit">Simpan / Update</button>
    <div class="success" id="msg"></div>
  </form>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDRvkYXHUb42q2H8F_2687CTihtDDNuYQ4",
      authDomain: "website-track-service.firebaseapp.com",
      databaseURL: "https://website-track-service-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "website-track-service",
      storageBucket: "website-track-service.firebasestorage.app",
      messagingSenderId: "87573564376",
      appId: "1:87573564376:web:c93c07f0506d00535a00ad",
      measurementId: "G-64T8XNWK5F"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    window.submitData = async function(e) {
      e.preventDefault();
      const kode = document.getElementById("kode").value;
      const nama = document.getElementById("nama").value;
      const barang = document.getElementById("barang").value;
      const status = document.getElementById("status").value;
      const msg = document.getElementById("msg");

      await set(ref(db, "antrian/" + kode), {
        nama: nama,
        barang: barang,
        status: status
      });

      msg.innerText = "Data berhasil disimpan!";
      setTimeout(() => { msg.innerText = "" }, 3000);
    }
  </script>
</body>
</html>

