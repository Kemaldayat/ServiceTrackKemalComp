<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kemal Computer - Cek Status & Informasi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght%3700&display=swap" rel="stylesheet">
    <style>
        /* Specific styles for index.html */
        body {
            font-family: 'Poppins', sans-serif; /* Menggunakan Poppins sebagai font dasar */
        }

        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 30px;
            background-color: var(--container-bg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
        }

        /* --- START REVISI HEADER --- */
        .header-public {
            display: flex;
            align-items: center; /* Pusatkan vertikal */
            justify-content: center; /* Pusatkan secara horizontal pada default */
            gap: 25px; /* Jarak antara logo dan teks, sedikit lebih lebar */
            margin-bottom: 40px;
            flex-wrap: wrap; /* Izinkan wrapping pada layar kecil */
            text-align: left; /* Teks di dalam header akan rata kiri secara default */
        }
        .header-public .header-content {
            text-align: left; /* Konten teks rata kiri */
        }
        .header-public img {
            max-width: 100px; /* Ukuran logo sedikit lebih kecil agar pas */
            min-width: 80px; /* Batas bawah agar tidak terlalu kecil */
            height: auto;
            margin-bottom: 0;
            border-radius: 8px;
        }
        .header-public h1 {
            color: var(--primary-color);
            font-family: 'Poppins', sans-serif; /* Pastikan konsisten */
            font-size: 2.8em; /* Sedikit lebih besar untuk impact */
            margin: 0;
            line-height: 1.2; /* Kerapatan baris */
            white-space: nowrap; /* Hindari pemotongan "Kemal Computer Service" */
        }
        .header-public p.tagline {
            color: var(--text-color-light);
            font-family: 'Playfair Display', serif;
            font-size: 1.3em; /* Tagline sedikit lebih besar */
            margin-top: 5px;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            white-space: nowrap; /* Hindari pemotongan tagline */
        }

        /* Responsive adjustments for header-public */
        @media (max-width: 768px) {
            .header-public {
                flex-direction: column; /* Menumpuk di layar kecil */
                align-items: center; /* Pusatkan logo dan teks */
                text-align: center; /* Pusatkan teks */
                gap: 15px; /* Kurangi jarak */
            }
            .header-public .header-content {
                text-align: center; /* Pusatkan teks */
            }
            .header-public h1 {
                font-size: 2.2em; /* Ukuran disesuaikan */
                white-space: normal; /* Izinkan wrapping lagi di mobile */
            }
            .header-public p.tagline {
                font-size: 1.1em; /* Ukuran disesuaikan */
                white-space: normal; /* Izinkan wrapping lagi di mobile */
            }
            .header-public img {
                max-width: 90px; /* Ukuran logo di mobile */
            }
        }
        @media (max-width: 480px) {
            .header-public h1 {
                font-size: 1.8em;
            }
            .header-public p.tagline {
                font-size: 1em;
            }
        }
        /* --- END REVISI HEADER --- */


        .section-title {
            text-align: center;
            color: var(--primary-color);
            margin-top: 40px;
            margin-bottom: 25px;
            font-size: 2em;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
            display: inline-block;
        }

        .search-form {
            max-width: 500px;
            margin: 0 auto 30px auto;
            padding: 25px;
            background-color: var(--light-bg);
            border-radius: 8px;
            box-shadow: var(--shadow-sm);
        }
        .search-form label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--text-color);
        }
        .search-form input[type="text"] {
            width: calc(100% - 24px);
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            font-size: 1em;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }
        .search-form button {
            width: 100%;
            padding: 12px 20px;
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            font-size: 1.1em;
            cursor: pointer;
            transition: var(--transition-ease);
            margin-top: 20px;
        }
        .search-form button:hover {
            background-color: var(--success-hover);
        }

        #resultContainer {
            margin-top: 20px;
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            background-color: var(--light-bg);
            text-align: left;
            min-height: 120px;
            box-shadow: var(--shadow-sm);
        }
        #resultContainer p {
            margin-bottom: 8px;
            font-size: 1em;
            color: var(--text-color);
        }
        #resultContainer strong {
            color: var(--primary-color);
        }
        .result-not-found {
            color: var(--danger-color);
            font-weight: bold;
            text-align: center;
            font-size: 1.1em;
            padding: 15px 0;
        }

        .map-section {
            text-align: center;
            margin-top: 50px;
            margin-bottom: 40px;
        }
        .map-section p.address {
            margin-bottom: 20px;
            font-size: 1.1em;
            color: var(--text-color);
            line-height: 1.5;
        }
        .map-section iframe {
            width: 100%;
            max-width: 800px;
            height: 450px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-md);
        }

        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid var(--border-color);
            color: var(--text-color);
        }
        footer .contact-info-footer {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        footer .contact-info-footer div {
            display: flex;
            align-items: center;
            font-size: 1em;
            color: var(--text-color-light);
        }
        footer .contact-info-footer i {
            margin-right: 8px;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        /* WhatsApp Button (Direct Link) specific styles - make it small and precise */
        .whatsapp-button-direct {
            background-color: #25D366; /* WhatsApp Green */
            color: white;
            padding: 6px 12px; /* Lebih kecil lagi */
            border: none;
            border-radius: var(--border-radius-sm);
            font-size: 0.8em; /* Font lebih kecil */
            text-decoration: none;
            margin-top: 15px; /* Jarak dari info kontak */
            cursor: pointer;
            transition: var(--transition-ease);
            box-shadow: var(--shadow-sm);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            width: fit-content; /* Sesuaikan lebar dengan konten */
        }
        .whatsapp-button-direct:hover {
            background-color: #1DA851;
            transform: translateY(-2px);
        }
        .whatsapp-button-direct i {
            font-size: 1em; /* Ikon juga disesuaikan */
        }

        /* Background Service Section */
        .service-info-section {
            background: url('./images/bg.jpg') no-repeat center center / cover;
            color: white;
            padding: 50px 20px;
            margin-top: 50px;
            border-radius: var(--border-radius-lg);
            text-align: center;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }
        .service-info-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            border-radius: var(--border-radius-lg);
            z-index: 1;
        }
        .service-info-section > * {
            position: relative;
            z-index: 2;
        }
        .service-info-section h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: white;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
        }
        .service-info-section p {
            font-size: 1.2em;
            max-width: 700px;
            margin: 0 auto 30px auto;
            line-height: 1.8;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
        }

        /* Responsive adjustments for index.html */
        @media (max-width: 768px) {
            /* Header-public styles are moved/overridden above for clarity */
            .search-form {
                padding: 20px;
            }
            .map-section iframe {
                height: 300px;
            }
            .whatsapp-button-direct {
                padding: 5px 10px; /* Lebih kecil di mobile */
                font-size: 0.75em;
            }
            .service-info-section {
                padding: 30px 15px;
            }
            .service-info-section h2 {
                font-size: 2em;
            }
            .service-info-section p {
                font-size: 1.1em;
            }
            footer .contact-info-footer {
                gap: 10px;
            }
        }
        @media (max-width: 480px) {
            .section-title {
                font-size: 1.8em;
            }
            footer .contact-info-footer div {
                font-size: 0.95em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header-public">
            <img src="./images/logo.png" alt="Logo Kemal Computer">
            <div class="header-content">
                <h1>Kemal Computer Service</h1>
                <p class="tagline">Solusi Terbaik untuk Perbaikan Perangkat Anda</p>
            </div>
        </header>

        <section class="service-info-section">
            <h2>Tentang Layanan Kami</h2>
            <p>
                Kami menyediakan layanan perbaikan komputer dan perangkat elektronik dengan cepat, handal, dan bergaransi.
                Tim teknisi berpengalaman kami siap mengatasi berbagai jenis kerusakan, mulai dari software hingga hardware.
                Percayakan perangkat Anda kepada kami!
            </p>
        </section>

        <h2 class="section-title">Cek Status Layanan Anda</h2>
        <form id="checkStatusForm" class="search-form">
            <div>
                <label for="serviceCode">Masukkan Kode Service:</label>
                <input type="text" id="serviceCode" placeholder="Contoh: KC-YYMMDD-HHMMSS-RANDOM" required>
            </div>
            <button type="submit"><i class="fas fa-search"></i> Cek Status</button>
        </form>

        <div id="resultContainer" class="table-responsive">
            <p style="text-align: center; color: var(--text-color-light);">Masukkan kode service untuk melihat status layanan Anda.</p>
        </div>

        <h2 class="section-title">Lokasi Kami</h2>
        <section class="map-section">
            <p class="address">
                Gg. Serai No.127B, Tempel, Caturtunggal, Kec. Depok, Kabupaten Sleman, Daerah Istimewa Yogyakarta 55281, Indonesia
            </p>
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3953.250893081121!2d110.38048607421111!3d-7.758838392263435!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e7a582e3b2e3b2e%3A0x1234567890abcdef!2sKemal%20Computer!5e0!3m2!1sid!2sid!4v1678901234567!5m2!1sid!2sid" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </section>

        <footer>
            <div class="contact-info-footer">
                <div><i class="fas fa-phone"></i> Nomor Admin: +62 882-2897-7367</div>
                <div><i class="fab fa-instagram"></i> Instagram: @Kemal_Computer</div>
                <a href="https://wa.me/6288228977367?text=Halo%20Kemal%20Computer,%20saya%20ingin%20bertanya%20mengenai%20layanan%20service." target="_blank" class="whatsapp-button-direct">
                    <i class="fab fa-whatsapp"></i> Hubungi Admin
                </a>
            </div>
        </footer>
    </div>

    <script type="module">
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDRvkYXHUb42q2H8F_2687CTihtDDNuYQ4",
            authDomain: "website-track-service.firebaseapp.com",
            databaseURL: "https://website-track-service-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "website-track-service",
            storageBucket: "website-track-service.firebasestorage.app",
            messagingSenderId: "87573564376",
            appId: "1:87573564376:web:c93c07f0506d00535a00ad",
            measurementId: "G-64T8XNWK5F"
        };

        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
        import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        document.getElementById('checkStatusForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const serviceCode = document.getElementById('serviceCode').value.trim();
            const resultContainer = document.getElementById('resultContainer');
            resultContainer.innerHTML = ''; // Clear previous results

            if (!serviceCode) {
                resultContainer.innerHTML = '<p class="result-not-found">Mohon masukkan kode service.</p>';
                return;
            }

            try {
                const dbRef = ref(db);
                const snapshot = await get(child(dbRef, `antrian/${serviceCode}`));

                if (snapshot.exists()) {
                    const service = snapshot.val();
                    let statusBadgeClass = '';
                    switch (service.status) {
                        case 'Menunggu': statusBadgeClass = 'status-waiting'; break;
                        case 'Proses': statusBadgeClass = 'status-process'; break;
                        case 'Selesai': statusBadgeClass = 'status-finished'; break;
                        case 'Diambil': statusBadgeClass = 'status-picked-up'; break;
                        default: statusBadgeClass = ''; // Default or unknown status
                    }
                    
                    // Format the timestamp for better readability
                    const date = new Date(service.timestamp);
                    const formattedDate = date.toLocaleDateString('id-ID', {
                        year: 'numeric', month: 'long', day: 'numeric',
                        hour: '2-digit', minute: '2-digit', second: '2-digit'
                    });

                    resultContainer.innerHTML = `
                        <p><strong>Kode Service:</strong> ${serviceCode}</p>
                        <p><strong>Nama Pelanggan:</strong> ${service.nama}</p>
                        <p><strong>Jenis Device:</strong> ${service.device || '-'}</p>
                        <p><strong>Deskripsi Kerusakan:</strong> ${service.kerusakan}</p>
                        <p><strong>Nomor HP:</strong> ${service.nomorHp || '-'}</p>
                        <p><strong>Status:</strong> <span class="status-badge ${statusBadgeClass}">${service.status}</span></p>
                        ${service.keterangan ? `<p><strong>Keterangan:</strong> ${service.keterangan}</p>` : ''}
                        <p><strong>Tanggal Masuk:</strong> ${formattedDate}</p>
                    `;
                } else {
                    resultContainer.innerHTML = '<p class="result-not-found">Kode service tidak ditemukan. Mohon periksa kembali.</p>';
                }
            } catch (error) {
                console.error("Error checking service status:", error);
                resultContainer.innerHTML = '<p class="result-not-found">Terjadi kesalahan saat mencari status. Silakan coba lagi.</p>';
            }
        });
    </script>
</body>
</html>
